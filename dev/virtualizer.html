<script type="module" src="./common.js"></script>
<script type="module">
  import { Virtualizer } from '@vaadin/component-base/src/virtualizer.js';

  const scrollTarget = document.querySelector('#scroll-target');
  const scrollContainer = document.querySelector('#scroll-container');

  const virtualizer = new Virtualizer({
    createElements: (count) => [...Array(count)].map(() => document.createElement('div')),
    updateElement: (el, index) => {
      el.style.right = '0';
      el.style.left = '0';
      el.style.display = 'flex';
      el.style.alignItems = 'center';
      el.style.background = index % 2 === 0 ? '#DCDCDC' : '#C0C0C0';
      el.style.height = '35px';
      el.style.padding = '0 10px';
      el.textContent = `Item ${index}`;
    },
    scrollTarget,
    scrollContainer,
    reorderElements: true,
  });

  virtualizer.size = 500000;

  document.querySelector('.scroll-to-end').addEventListener('click', () => {
    virtualizer.scrollToIndex(virtualizer.size - 1);
  });

  document.querySelector('.scroll-to-index').addEventListener('click', () => {
    virtualizer.scrollToIndex(400000);
  });

  document.querySelector('.decrease-size').addEventListener('click', () => {
    virtualizer.size = 400012;
  });

  document.querySelector('.increase-size').addEventListener('click', () => {
      virtualizer.size = 600000;
    });

  window.virtualizer = virtualizer;
</script>

<button class="scroll-to-end">Scroll to end</button>

<button class="scroll-to-index">Scroll to index</button>

<button class="decrease-size">Decrease size</button>

<button class="increase-size">Increase size</button>

<div style="height: 250px; margin: 10px 0;" id="scroll-target">
  <!-- <div style="height: 50px; background: red; position: sticky; top: 0; z-index: 1"></div> -->
  <div id="scroll-container"></div>
</div>
