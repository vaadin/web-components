<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <title>Aura</title>
    <link rel="stylesheet" href="../packages/aura/aura.css" />
    <link rel="stylesheet" href="./aura/aura-view.css" />
    <link rel="stylesheet" href="./aura/aura-extras.css" />
    <link rel="stylesheet" href="./aura/badge.css" />
    <script type="module">
      window.Vaadin ||= {};
      window.Vaadin.featureFlags ||= {};
      window.Vaadin.featureFlags.masterDetailLayoutComponent = true;
    </script>
    <script type="module">
      import './aura/aura-theme-editor.js';
      import './aura/components-view.js';
      import './aura/dashboard-view.js';
      import '@vaadin/app-layout';
      import '@vaadin/app-layout/src/vaadin-drawer-toggle.js';
      import '@vaadin/icons';
      import '@vaadin/item';

      // Fake navigation: prevent navigation, update 'current' item manually
      document.querySelectorAll('vaadin-side-nav').forEach((nav) => {
        nav.addEventListener('click', (e) => {
          const item = e.target.closest('vaadin-side-nav-item');
          if (item) {
            e.preventDefault();
            item
              .closest('vaadin-side-nav')
              .parentNode.querySelectorAll('vaadin-side-nav-item')
              .forEach((item) => item.removeAttribute('current'));
            item.setAttribute('current', '');

            if (item.dataset.viewName) {
              document.querySelector('vaadin-app-layout > :not([slot])').remove();
              const view = document.createElement(item.dataset.viewName);
              document.querySelector('vaadin-app-layout').append(view);
            }
          }
        });
      });
    </script>
  </head>
  <body>
    <vaadin-app-layout>
      <header slot="drawer" class="aura-view-header">
        <!-- TODO need to figure out a way to align things in the header with the side nav items. CSS subgrid perhaps? -->
        <vaadin-avatar theme="vaadin square filled" style="--vaadin-avatar-size: 1.25lh; margin-inline: calc(var(--vaadin-padding-inline-container) - var(--vaadin-side-nav-item-border-width) - (var(--vaadin-avatar-size) - var(--vaadin-icon-size, 1lh)) / 2);"></vaadin-avatar>
        <div class="aura-view-heading">Aura</div>
        <vaadin-drawer-toggle theme="tertiary permanent"></vaadin-drawer-toggle>
      </header>

      <vaadin-scroller slot="drawer" theme="overflow-indicators">
        <vaadin-side-nav>
          <vaadin-side-nav-item data-view-name="components-view">
            <vaadin-icon src="./assets/lucide-icons/home.svg" slot="prefix"></vaadin-icon>
            Overview
          </vaadin-side-nav-item>
        </vaadin-side-nav>

        <hr>

        <vaadin-side-nav collapsible>
          <span slot="label">Dashboard</span>

          <vaadin-side-nav-item path="" data-view-name="dashboard-view">
            <vaadin-icon src="./assets/lucide-icons/layout-panel-left.svg" slot="prefix"></vaadin-icon>
            Overview
            <span class="aura-badge aura-accent-color" slot="suffix" aria-label="(2 new items)">2</span>
          </vaadin-side-nav-item>

          <vaadin-side-nav-item>
            <vaadin-icon icon="vaadin:dollar" slot="prefix"></vaadin-icon>
            Revenue
          </vaadin-side-nav-item>

          <vaadin-side-nav-item>
            <vaadin-icon icon="vaadin:line-chart" slot="prefix"></vaadin-icon>
            Engagement
          </vaadin-side-nav-item>

          <vaadin-side-nav-item>
            <vaadin-icon src="./assets/lucide-icons/layers.svg" slot="prefix"></vaadin-icon>
            Products
          </vaadin-side-nav-item>

          <vaadin-side-nav-item>
            <vaadin-icon icon="vaadin:area-select" slot="prefix"></vaadin-icon>
            Integrations
          </vaadin-side-nav-item>

          <vaadin-side-nav-item>
            <vaadin-icon icon="vaadin:invoice" slot="prefix"></vaadin-icon>
            Billing
          </vaadin-side-nav-item>
        </vaadin-side-nav>

        <hr>

        <vaadin-side-nav collapsible>
          <span slot="label">Users</span>

          <vaadin-side-nav-item>
            <vaadin-icon src="./assets/lucide-icons/users.svg" slot="prefix"></vaadin-icon>
            Manage
          </vaadin-side-nav-item>

          <vaadin-side-nav-item>
            <vaadin-icon icon="vaadin:credit-card" slot="prefix"></vaadin-icon>
            Billing
          </vaadin-side-nav-item>

          <vaadin-side-nav-item>
            <vaadin-icon src="./assets/lucide-icons/user-plus.svg" slot="prefix"></vaadin-icon>
            Invite
          </vaadin-side-nav-item>

          <vaadin-side-nav-item>
            <vaadin-icon icon="vaadin:key-o" slot="prefix"></vaadin-icon>
            API Keys
          </vaadin-side-nav-item>
        </vaadin-side-nav>

        <hr>

        <vaadin-side-nav collapsible collapsed>
          <span slot="label">Modules</span>
        </vaadin-side-nav>

        <hr>

        <vaadin-side-nav collapsible collapsed>
          <span slot="label">Extensions</span>
        </vaadin-side-nav>
      </vaadin-scroller>

      <footer slot="drawer" class="aura-view-footer">
        <vaadin-button theme="tertiary">
          <vaadin-avatar abbr="J" style="--vaadin-avatar-size: 1.25lh" slot="prefix" tabindex="-1"></vaadin-avatar>
          <span>John Smith</span>
        </vaadin-button>
        <aura-theme-editor></aura-theme-editor>
      </footer>

      <main style="height: 100%;">
        <dashboard-view></dashboard-view>
      </main>

    </vaadin-app-layout>
  </body>
</html>
