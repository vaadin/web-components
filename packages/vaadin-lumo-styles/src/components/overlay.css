:host {
  z-index: 200;
  position: fixed;

  /* Despite of what the names say, <vaadin-overlay> is just a container
        for position/sizing/alignment. The actual overlay is the overlay part. */

  /* Default position constraints: the entire viewport. Note: themes can
        override this to introduce gaps between the overlay and the viewport. */
  inset: 0;
  bottom: var(--vaadin-overlay-viewport-bottom);

  /* Use flexbox alignment for the overlay part. */
  display: flex;
  flex-direction: column; /* makes dropdowns sizing easier */
  /* Align to center by default. */
  align-items: center;
  justify-content: center;

  /* Allow centering when max-width/max-height applies. */
  margin: auto;

  /* The host is not clickable, only the overlay part is. */
  pointer-events: none;

  /* Remove tap highlight on touch devices. */
  -webkit-tap-highlight-color: transparent;

  /* CSS API for host */
  --vaadin-overlay-viewport-bottom: 0;
}

:host([hidden]),
:host(:not([opened]):not([closing])),
:host(:not([opened]):not([closing])) [part='overlay'] {
  display: none !important;
}

[part='overlay'] {
  -webkit-overflow-scrolling: touch;
  overflow: auto;
  pointer-events: auto;

  /* Prevent overflowing the host */
  max-width: 100%;
  box-sizing: border-box;

  -webkit-tap-highlight-color: initial; /* reenable tap highlight inside */
}

[part='backdrop'] {
  z-index: -1;
  content: '';
  background: rgba(0, 0, 0, 0.5);
  position: fixed;
  inset: 0;
  pointer-events: auto;
}

:host {
  top: var(--lumo-space-m);
  right: var(--lumo-space-m);
  bottom: var(--lumo-space-m);
  left: var(--lumo-space-m);
  /* Workaround for Edge issue (only on Surface), where an overflowing vaadin-list-box inside vaadin-select-overlay makes the overlay transparent */
  /* stylelint-disable-next-line */
  outline: 0px solid transparent;
}

[part='overlay'] {
  background-color: var(--lumo-base-color);
  background-image: linear-gradient(var(--lumo-tint-5pct), var(--lumo-tint-5pct));
  border-radius: var(--lumo-border-radius-m);
  box-shadow:
    0 0 0 1px var(--lumo-shade-5pct),
    var(--lumo-box-shadow-m);
  color: var(--lumo-body-text-color);
  font-family: var(--lumo-font-family);
  font-size: var(--lumo-font-size-m);
  font-weight: 400;
  line-height: var(--lumo-line-height-m);
  letter-spacing: 0;
  text-transform: none;
  -webkit-text-size-adjust: 100%;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

[part='content'] {
  padding: var(--lumo-space-xs);
}

[part='backdrop'] {
  background-color: var(--lumo-shade-20pct);
  animation: 0.2s lumo-overlay-backdrop-enter both;
  will-change: opacity;
}

@keyframes lumo-overlay-backdrop-enter {
  0% {
    opacity: 0;
  }
}

:host([closing]) [part='backdrop'] {
  animation: 0.2s lumo-overlay-backdrop-exit both;
}

@keyframes lumo-overlay-backdrop-exit {
  100% {
    opacity: 0;
  }
}

@keyframes lumo-overlay-dummy-animation {
  0% {
    opacity: 1;
  }

  100% {
    opacity: 1;
  }
}
