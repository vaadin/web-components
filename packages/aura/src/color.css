html {
  --aura-contrast: 1;

  --aura-accent-light: hsl(220, 80%, 47%);
  --aura-accent-dark: hsl(220, 75%, 56%);

  --_color-base: light-dark(
    oklch(from var(--aura-background-light) 0.1 calc(c * var(--_neutral-c) * 2) h),
    oklch(from var(--aura-background-dark) 1 calc(c * var(--_neutral-c)) h)
  );
  --vaadin-color: light-dark(
    color-mix(in srgb, var(--_color-base) calc(90% + 5% * var(--aura-contrast)), transparent),
    color-mix(in srgb, #fff calc(90% + 5% * var(--aura-contrast)), transparent)
  );
  --vaadin-color-subtle: light-dark(
    color-mix(in srgb, var(--_color-base) calc(55% + 10% * var(--aura-contrast)), transparent),
    color-mix(in srgb, var(--_color-base) calc(55% + 10% * var(--aura-contrast)), transparent)
  );
  --vaadin-color-disabled: color-mix(in srgb, var(--_color-base) calc(40% + 10% * var(--aura-contrast)), transparent);

  /* TODO base on background color instead of accent color */
  --_border-color-base: light-dark(
    oklch(from var(--aura-background-light) 0.1 calc(c * var(--_neutral-c) * 3) h),
    oklch(from var(--aura-background-dark) 0.98 calc((c + 0.1) * var(--_neutral-c)) h)
  );
  --vaadin-border-color: color-mix(
    in srgb,
    var(--_border-color-base) calc(14% + 6% * var(--aura-contrast)),
    transparent
  );
  --vaadin-border-color-subtle: light-dark(
    color-mix(in srgb, var(--_border-color-base) max(5%, 3% + 4% * var(--aura-contrast)), transparent),
    color-mix(in srgb, var(--_border-color-base) max(6%, 4% + 5% * var(--aura-contrast)), transparent)
  );

  --aura-neutral-saturation: 0.2;

  --aura-background-light: oklch(
    from var(--aura-accent-light) min(1, l + (1 - l) * 0.85) min(c * var(--_neutral-c) * 2, 0.4) h
  );
  --aura-background-dark: oklch(
    from var(--aura-accent-dark) max(0, l/2 - (1 - l) * 0.2) min(c * var(--_neutral-c) * 0.75, 0.1) h
  );
  --aura-background: light-dark(var(--aura-background-light), var(--aura-background-dark));
  --_aura-background-alt: oklch(
    from var(--aura-background) calc(l - 0.1 + l / 8) calc(c * l * var(--aura-neutral-saturation) * 2)
      calc(h + 150 * var(--_safari-17-deg, 1deg) * l)
  );
  --aura-accent-background: var(--aura-background);

  --aura-accent-color: light-dark(var(--aura-accent-light), var(--aura-accent-dark));
  --vaadin-focus-ring-color: var(--aura-accent-color);
  accent-color: var(--aura-accent-color);
  /* Workaround Safari 17 limitation and compute these separately for light and dark */
  --aura-accent-contrast: light-dark(
    oklch(from var(--aura-accent-light) clamp(0, (0.62 - l) * 1000, 1) 0 0),
    oklch(from var(--aura-accent-dark) clamp(0, (0.62 - l) * 1000, 1) 0 0)
  );
}

html,
[theme] {
  --_neutral-c: calc(0.4 * var(--aura-neutral-saturation));
  --vaadin-background-color: var(--aura-surface-solid);
}

@supports (color: hsl(0 0 0)) {
  html {
    --_safari-17-deg: 1;
    --aura-accent-background: radial-gradient(
      circle at 25% 0% in xyz,
      var(--aura-background) 33%,
      var(--_aura-background-alt)
    );
  }
}
