<!doctype html>

<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1" />

    <title>Polymer Example</title>

    <script src="../../webcomponentsjs/webcomponents-lite.js"></script>

    <link rel="import" href="../vaadin-grid.html">
    <link rel="import" href="../../paper-checkbox/paper-checkbox.html">
    <link rel="import" href="../../paper-input/paper-input.html">

    <style>
    </style>
  </head>

  <body>

    <dom-module id="x-app">
      <template>
        <style>
          #component {
            height: 600px;
          }

          progress {
            width: 50px;
          }

          :host ::content th,
          :host ::content tfoot td {
            border-right: 1px solid rgba(0, 0, 0, 0.08);
            border-left: 1px solid rgba(0, 0, 0, 0.08);
            background: rgb(250, 248, 255) !important;
          }
          :host ::content th:last-child,
          :host ::content tfoot td:last-child {
          }
        </style>
        <vaadin-grid id="component" data-source="[[dataSource]]" size="20"  on-item-changed="_itemChanged" multi-selection>

          <vaadin-grid-column class="C0" width="45px" flex="0">
            <template>
              [[index]]
            </template>
            <template is="header" class="c0">
              TC0
            </template>
          </vaadin-grid-column>

          <vaadin-grid-column-group class="G1">
            <vaadin-grid-column class="C1">
              <template>
                <span class="elItem">[[item.name]]</span>
              </template>
              <template is="header" class="c1">
                TC1
              </template>
              <template is="footer" class="c1">
                TCF1
              </template>
            </vaadin-grid-column>

            <vaadin-grid-column class="C2">
              <template>
                <paper-input value="{{item.name}}"></paper-input>
              </template>
              <template is="header" class="c2-h1">
                TC2
              </template>
              <template is="footer" class="c2">
                TCF2
              </template>
            </vaadin-grid-column>
            <template is="header" class="g1">
              TG1
            </template>
            <template is="footer" class="gf1">
              TGF1
            </template>
          </vaadin-grid-column-group>

          <vaadin-grid-column-group class="G2">
            <vaadin-grid-column class="C3">
              <template>
                <div>baz-[[index]]</div>
              </template>
              <template is="header" class="g2">
                TC3
              </template>
            </vaadin-grid-column>

            <vaadin-grid-column-group class="G3">
              <vaadin-grid-column class="C4" width="20px">
                <template>
                  [[index]]
                </template>
                <template is="header" class="c4">
                  TC4
                </template>
              </vaadin-grid-column>
              <vaadin-grid-column class="C5" width="20px">
                <template>
                  <progress value="[[index]]" max="25"></progress>
                </template>
                <template is="header" class="c5">
                  TC5
                </template>
              </vaadin-grid-column>
              <vaadin-grid-column class="C6">
                <template>
                  <paper-checkbox>Details</paper-checkbox>
                </template>
                <template is="header" class="c6">
                  TC6
                </template>
              </vaadin-grid-column>
              <template is="header" class="g3">
                TG3
              </template>
            </vaadin-grid-column-group>
            <template is="header" class="g2">
              TG2
            </template>
          </vaadin-grid-column-group>
        </vaadin-grid>
      </template>
      <script>

        document.addEventListener('WebComponentsReady', function () {
          Polymer({
            is: 'x-app',

            properties: {
              dataSource: {
                value: function() {
                  return function(opts, callback) {
                    console.log('requesting page ' + opts.page);
                    setTimeout(function() {
                      var result = [];
                      var firstIndex = opts.page * opts.pageSize;
                      for (var i = 0; i < opts.pageSize; i++) {
                        result.push({
                          name: 'name-' + (firstIndex + i)
                        });
                      }
                      callback(result);
                    }, 100);
                  };
                }
              }
            },

            _itemChanged: function(e) {
              console.log(e.detail);
            }
          });
        });
      </script>
    </dom-module>

    <x-app></x-app>

  </body>
</html>
