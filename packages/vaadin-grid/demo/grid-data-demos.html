<dom-module id="grid-data-demos">
  <template>
    <style>
       :host {
        display: block;
      }

    </style>


    <h3>Assigning Array Data</h3>
    <p>An array of objects can be assigned to the <code>items</code> property.</p>
    <vaadin-demo-snippet id='grid-data-demos-assigning-array-data'>
      <template preserve-content>
        <x-array-data-example></x-array-data-example>
        <dom-module id="x-array-data-example">
          <template preserve-content>
            <vaadin-grid aria-label="Array Data Example" items="[[items]]">

              <vaadin-grid-column width="50px" flex-grow="0">
                <template class="header">#</template>
                <template>[[index]]</template>
              </vaadin-grid-column>

              <vaadin-grid-column>
                <template class="header">First Name</template>
                <template>[[item.firstName]]</template>
              </vaadin-grid-column>

              <vaadin-grid-column>
                <template class="header">Last Name</template>
                <template>[[item.lastName]]</template>
              </vaadin-grid-column>

            </vaadin-grid>
          </template>
          <script>
            window.addDemoReadyListener('#grid-data-demos-assigning-array-data', function(document) {
              class XArrayDataExample extends Polymer.Element {
                static get is() {
                  return 'x-array-data-example';
                }
                ready() {
                  super.ready();
                  const items = [];

                  for (var i = 0; i < 100; i++) {
                    items.push({firstName: 'First Name ' + i, lastName: 'Last Name ' + i});
                  }

                  this.items = items;
                }
              }
              window.customElements.define(XArrayDataExample.is, XArrayDataExample);
            });
          </script>
        </dom-module>
      </template>
    </vaadin-demo-snippet>


    <h3>Dynamic Array Data</h3>
    <p>
      The <code>items</code> property can be modified using <a href="https://www.polymer-project.org/1.0/docs/devguide/model-data#array-mutation" target="_blank">Polymer's array mutation methods</a>.
    </p>
    <vaadin-demo-snippet id='grid-data-demos-dynamic-array-data'>
      <template preserve-content>
        <x-dynamic-data-example></x-dynamic-data-example>
        <dom-module id="x-dynamic-data-example">
          <template preserve-content>
            <style>
              paper-button {
                margin-bottom: 20px;
              }
            </style>
            <paper-button raised on-tap="_add">Add Item</paper-button>
            <paper-button raised on-tap="_remove">Remove Item</paper-button>

            <vaadin-grid aria-label="Dynamic Data Example" items="[[items]]">

              <vaadin-grid-column width="50px" flex-grow="0">
                <template class="header">#</template>
                <template>[[index]]</template>
              </vaadin-grid-column>

              <vaadin-grid-column>
                <template class="header">First Name</template>
                <template>[[item.firstName]]</template>
              </vaadin-grid-column>

              <vaadin-grid-column>
                <template class="header">Last Name</template>
                <template>[[item.lastName]]</template>
              </vaadin-grid-column>

            </vaadin-grid>
          </template>
          <script>
            window.addDemoReadyListener('#grid-data-demos-dynamic-array-data', function(document) {
              class XDynamicDataExample extends Polymer.Element {
                static get is() {
                  return 'x-dynamic-data-example';
                }
                ready() {
                  super.ready();

                  const items = [];

                  for (var i = 0; i < 10; i++) {
                    items.push({firstName: 'First Name ' + i, lastName: 'Last Name ' + i});
                  }

                  this.items = items;
                }

                _add() {
                  this.push('items', {firstName: 'First Name ' + this.items.length, lastName: 'Last Name ' + this.items.length});
                }

                _remove() {
                  this.pop('items');
                }
              }
              window.customElements.define(XDynamicDataExample.is, XDynamicDataExample);
            });
          </script>
        </dom-module>
      </template>
    </vaadin-demo-snippet>


    <h3>Dynamic Height</h3>
    <p>
      Setting <code>height: auto</code> will make <code>&lt;vaadin-grid&gt;</code> grow
      and shrink in height depending on the number of rows.
    </p>
    <vaadin-demo-snippet id='grid-data-demos-dynamic-height'>
      <template preserve-content>
        <x-dynamic-height-example></x-dynamic-height-example>
        <dom-module id="x-dynamic-height-example">
          <template preserve-content>
            <style>
              vaadin-grid {
                height: auto;
              }

              paper-button {
                margin-bottom: 20px;
              }
            </style>
            <paper-button raised on-tap="_add">Add Item</paper-button>
            <paper-button raised on-tap="_remove">Remove Item</paper-button>

            <vaadin-grid aria-label="Dynamic Data Example" items="[[items]]">

              <vaadin-grid-column width="50px" flex-grow="0">
                <template class="header">#</template>
                <template>[[index]]</template>
              </vaadin-grid-column>

              <vaadin-grid-column>
                <template class="header">First Name</template>
                <template>[[item.firstName]]</template>
              </vaadin-grid-column>

              <vaadin-grid-column>
                <template class="header">Last Name</template>
                <template>[[item.lastName]]</template>
              </vaadin-grid-column>

            </vaadin-grid>
          </template>
          <script>
            window.addDemoReadyListener('#grid-data-demos-dynamic-height', function(document) {
              class XDynamicHeightExample extends Polymer.Element {
                static get is() {
                  return 'x-dynamic-height-example';
                }
                ready() {
                  super.ready();

                  const items = [];

                  for (var i = 0; i < 5; i++) {
                    items.push({firstName: 'First Name ' + i, lastName: 'Last Name ' + i});
                  }

                  this.items = items;
                }

                _add() {
                  this.push('items', {firstName: 'First Name ' + this.items.length, lastName: 'Last Name ' + this.items.length});
                }

                _remove() {
                  this.pop('items');
                }
              }
              window.customElements.define(XDynamicHeightExample.is, XDynamicHeightExample);
            });
          </script>
        </dom-module>
      </template>
    </vaadin-demo-snippet>


    <h3>Assigning Remote/Function Data</h3>
    <p>
      A function can be assigned to the <code>dataProvider</code> property to provide
      data from a remote source.
    </p>
    <p>
      <b>Note:</b> <code>size</code> must be also set to reflect
      the number of items in the data set.
    </p>
    <vaadin-demo-snippet id='grid-data-demos-assigning-remotefunction-data'>
      <template preserve-content>
        <x-remote-data-example></x-remote-data-example>
        <dom-module id="x-remote-data-example">
          <template preserve-content>
            <vaadin-grid aria-label="Remote Data Example" data-provider="[[dataProvider]]" size="[[size]]">

              <vaadin-grid-column width="50px" flex-grow="0">
                <template class="header">#</template>
                <template>[[index]]</template>
              </vaadin-grid-column>

              <vaadin-grid-column>
                <template class="header">First Name</template>
                <template>[[item.firstName]]</template>
              </vaadin-grid-column>

              <vaadin-grid-column>
                <template class="header">Last Name</template>
                <template>[[item.lastName]]</template>
              </vaadin-grid-column>

            </vaadin-grid>
          </template>
          <script>
            window.addDemoReadyListener('#grid-data-demos-assigning-remotefunction-data', function(document) {
              class XRemoteDataExample extends Polymer.Element {
                static get is() {
                  return 'x-remote-data-example';
                }
                ready() {
                  super.ready();
                  this.size = 200;
                  this.dataProvider = (params, callback) => {
                    const xhr = new XMLHttpRequest();
                    xhr.onload = () => callback(JSON.parse(xhr.responseText).result);
                    const index = params.page * params.pageSize;
                    xhr.open('GET', 'https://demo.vaadin.com/demo-data/1.0/people?index=' + index + '&count=' + params.pageSize, true);
                    xhr.send();
                  };
                }
              }
              window.customElements.define(XRemoteDataExample.is, XRemoteDataExample);
            });
          </script>
        </dom-module>
      </template>
    </vaadin-demo-snippet>

  </div>

  </template>
  <script>
    class GridDataDemos extends DemoReadyEventEmitter(GridDemo(Polymer.Element)) {
      static get is() { return 'grid-data-demos'; }
    }
    customElements.define(GridDataDemos.is, GridDataDemos);
  </script>
</dom-module>
