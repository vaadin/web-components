<!--
@license
Copyright (c) 2017 Vaadin Ltd.
This program is available under Apache License Version 2.0, available at https://vaadin.com/license/
-->

<link rel="import" href="../polymer/polymer-element.html">
<link rel="import" href="../polymer/lib/utils/templatize.html">
<link rel="import" href="vaadin-device-detector.html">
<link rel="import" href="vaadin-overlay.html">

<dom-module id="vaadin-context-menu-overlay-styles" theme-for="vaadin-context-menu-overlay">
  <template>
    <style>
      :host {
        display: block;
        -webkit-overflow-scrolling: touch;
        -webkit-user-select: none;
        overflow: auto;
      }

      :host(:not([phone])) {
        position: fixed;
        top: 0;
        left: 0;
        box-shadow:
          0 6px 10px 0 rgba(0, 0, 0, 0.14),
          0 1px 18px 0 rgba(0, 0, 0, 0.12),
          0 3px 5px -1px rgba(0, 0, 0, 0.4);
      }

      :host([phone]) {
        /* width set to make it possible for the user make the contents fit whole screen */
        width: 100vw;
        /* Ideally should be 100vh but iOS phone addr-bar covers view port */
        max-height: 80vh;
        /* Needed for iOS */
        top: auto !important;
        bottom: 0;
        /* leave a space around the overlay */
        margin: 24px;
        /* Override desktop translate */
        transform: none !important;
      }
    </style>
  </template>
  <script>
    (function() {
      /**
       * @memberof Vaadin
       * @mixes Polymer.IronOverlayBehavior
       * @demo demo/index.html
       */
      class ContextMenuOverlayElement extends Vaadin.OverlayElement {
        static get is() {
          return 'vaadin-context-menu-overlay';
        }

        static get observers() {
          return [
            '_phoneChanged(phone)'
          ];
        }

        static get properties() {
          return {

            /**
             * When `true` overlay is optimized for a small touch screen.
             * When `false`, overlay position and size is optimized for a desktop/tablet screen.
             */
            phone: {
              type: Boolean,
              reflectToAttribute: true
            }
          };
        }

        _phoneChanged(phone) {
          if (!phone) {
            // this.backdropElement.style.opacity = 0;
          }
        }

      }

      customElements.define(ContextMenuOverlayElement.is, ContextMenuOverlayElement);
      /**
       * @namespace Vaadin
       */
      window.Vaadin = window.Vaadin || {};
      Vaadin.ContextMenuOverlayElement = ContextMenuOverlayElement;
    })();
  </script>
</dom-module>
