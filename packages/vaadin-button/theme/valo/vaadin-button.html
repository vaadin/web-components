<link rel="import" href="../../src/vaadin-button.html">

<link rel="import" href="../../../vaadin-valo-theme/color.html">
<link rel="import" href="../../../vaadin-valo-theme/sizing.html">
<link rel="import" href="../../../vaadin-valo-theme/spacing.html">
<link rel="import" href="../../../vaadin-valo-theme/style.html">
<link rel="import" href="../../../vaadin-valo-theme/typography.html">

<dom-module id="valo-button" theme-for="vaadin-button">
  <template>
    <style include="valo-button-sizing valo-button-style valo-button-states valo-button-types valo-button-colors valo-button-icons">
      :host([disabled]) {
        pointer-events: none !important;
      }
    </style>
  </template>
</dom-module>

<dom-module id="valo-button-sizing">
  <template>
    <style>
      :host {
        --valo-button-size: var(--valo-size-m);
        min-width: calc(var(--valo-button-size) * 2);
        min-height: var(--valo-button-size);
        padding: 0 calc(var(--valo-button-size) / 3 + var(--valo-border-radius) / 2);
        margin: var(--valo-space-xs) 0;
        box-sizing: border-box;
      }

      [part="label"] {
        padding: calc(var(--valo-button-size) / 6) 0;
      }

      :host([theme~="small"]) {
        font-size: var(--valo-font-size-s);
        --valo-button-size: var(--valo-size-s);
      }

      :host([theme~="large"]) {
        font-size: var(--valo-font-size-l);
        --valo-button-size: var(--valo-size-l);
      }
    </style>
  </template>
</dom-module>

<dom-module id="valo-button-style">
  <template>
    <style>
      :host {
        font-family: var(--valo-font-family);
        font-size: var(--valo-font-size-m);
        line-height: var(--valo-line-height-xs);
        font-weight: 500;
        color: var(--valo-primary-text-color);
        background-color: var(--valo-contrast-5pct);
        border-radius: var(--valo-border-radius);
        cursor: default;
        -webkit-tap-highlight-color: transparent;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }

      /* Disabled */

      :host([disabled][disabled]) {
        color: var(--valo-disabled-text-color);
        background-color: var(--valo-contrast-5pct);
      }
    </style>
  </template>
</dom-module>

<dom-module id="valo-button-states">
  <template>
    <style>
      :host {
        position: relative;
      }

      :host::before,
      :host::after {
        content: "";
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        background-color: currentColor;
        border-radius: var(--valo-border-radius);
        opacity: 0;
        transition: opacity 0.2s;
        will-change: opacity;
        pointer-events: none;
      }

      /* Hover */

      :host(:hover)::before {
        opacity: 0.05;
      }

      /* Disable for touch devices */
      @media (pointer: coarse) {
        :host(:hover)::before {
          opacity: 0;
        }
      }

      /* Active */

      :host::after {
        transition: opacity 1.4s, transform 0.1s;
        will-change: opacity, transform;
        filter: blur(8px);
      }

      :host([active]) {
        transition-duration: 0.05s;
      }

      :host([active])::before {
        opacity: 0.1;
        transition-duration: 0s;
      }

      :host([active])::after {
        opacity: 0.1;
        transition-duration: 0.05s, 0s;
        transform: scale(0);
      }

      /* Keyboard focus */

      :host([focus-ring]) {
        box-shadow: 0 0 0 2px var(--valo-primary-color-50pct);
      }
    </style>
  </template>
</dom-module>

<dom-module id="valo-button-types">
  <template>
    <style>
      /* Tertiary */

      :host([theme~="tertiary"]),
      :host([theme~="tertiary-inline"]) {
        background-color: transparent !important;
        transition: opacity 0.2s;
      }

      :host([theme~="tertiary"])::before,
      :host([theme~="tertiary-inline"])::before {
        display: none;
      }

      :host([theme~="tertiary"]) {
        padding: 0 calc(var(--valo-button-size) / 6);
      }

      @media (hover: hover) {
        :host([theme*="tertiary"]:not([active]):hover) {
          opacity: 0.8;
        }
      }

      :host([theme~="tertiary"][active]),
      :host([theme~="tertiary-inline"][active]) {
        color: var(--valo-body-text-color);
      }

      /* Tertiary inline ("text button") */

      :host([theme~="tertiary-inline"]) {
        margin: 0;
        min-width: 0;
        min-height: 0;
        padding: 0;
        line-height: inherit;
        font-size: inherit;
      }

      /* Primary */

      :host([theme~="primary"]) {
        background-color: var(--valo-primary-color);
        color: var(--valo-primary-contrast-color);
        font-weight: 600;
        min-width: calc(var(--valo-button-size) * 2.5);
      }

      :host([theme~="primary"][active])::before {
        color: var(--valo-contrast-50pct);
      }

      :host([theme~="primary"][active])::after {
        opacity: 0.2;
      }
    </style>
  </template>
</dom-module>

<dom-module id="valo-button-colors">
  <template>
    <style>
      :host([theme~="success"]) {
        color: var(--valo-success-text-color);
      }

      :host([theme~="success"][theme~="primary"]) {
        background-color: var(--valo-success-color);
        color: var(--valo-success-contrast-color);
      }

      :host([theme~="error"]) {
        color: var(--valo-error-text-color);
      }

      :host([theme~="error"][theme~="primary"]) {
        background-color: var(--valo-error-color);
        color: var(--valo-error-contrast-color);
      }

      :host([theme~="contrast"]) {
        color: var(--valo-contrast);
      }

      :host([theme~="contrast"][theme~="primary"]) {
        background-color: var(--valo-contrast);
        color: var(--valo-base-color);
      }
    </style>
  </template>
</dom-module>

<dom-module id="valo-button-icons">
  <template>
    <style>
      :host ::slotted(iron-icon) {
        display: inline-block;
        width: 1.5em;
        height: 1.5em;
      }

      /* Vaadin icons are based on a 16x16 grid (unlike Valo and Material icons with 24x24), so they look too big by default */
      :host ::slotted(iron-icon[icon^="vaadin:"]) {
        width: 1em;
        height: 1em;
        padding: 4px;
      }

      [part="prefix"] {
        margin-left: -0.25em;
        margin-right: 0.25em;
      }

      [part="suffix"] {
        margin-left: 0.25em;
        margin-right: -0.25em;
      }

      /* Icon-only */

      :host([theme~="icon"]) {
        min-width: var(--valo-button-size);
        padding-left: calc(var(--valo-button-size) / 4);
        padding-right: calc(var(--valo-button-size) / 4);
      }

      :host([theme~="icon"]) [part="prefix"],
      :host([theme~="icon"]) [part="suffix"] {
        margin-left: 0;
        margin-right: 0;
      }
    </style>
  </template>
</dom-module>
